In the previous section, we gave an overview of the most important rules in
the semantics of Hazelnut, and stated the important theorems. In a few
cases, we sketched out why these theorems will hold.

In order to formally verify that our design meets the stated objectives, we
are preparing a formalization of the grammar, the judgements given above
and the metatheory in the proof assistant Agda \cite{norell:thesis}. We
refer readers unfamiliar with the particulars of Agda to the Wiki, hosted
at \url{http://wiki.portal.chalmers.se/agda/}.

This formalization is a work in progress at the time of submission, but we
plan on completing it by the time this work is presented. The goal is fully
mechanized proofs Theorem \ref{thrm:actsafe} and Theorem \ref{thrm:actdet}
that act as a platform to explore more sophisticated designs. The
development can be found at
\url{http://github.com/hazelgrove/agda-tfp16}, which includes the actual Agda
source as well as a more detailed discussion of the various representation
decisions and assumptions made.

The core idea of our formalization is to encode each judgement as a
dependent type. The rules of the judgements become the constructors of the
type, and derivations of theorems values of the type. This is a rich
setting that allows proofs to take advantage of pattern matching on the
shape of derivations, closely matching on-paper proofs of similar
properties.

Because the metatheory in this paper is largely concerned with the statics
of Hazelnut, rather than the dynamics, we adopt Barendregt's convention for
bound variables and avoid substitution entirely.\cite{urban} Future
iterations of this formalization will need a more mature technique for
reasoning about binding---likely de Bruijn indices or abstract bounding
trees.\cite{} \cite{} By avoiding them now, when they are not truly needed,
we can offer a clear first formalization that hews closely to the informal
mathematics.
